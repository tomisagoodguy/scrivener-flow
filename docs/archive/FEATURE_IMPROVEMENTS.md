# ğŸ¯ åŠŸèƒ½æ”¹é€²å»ºè­° - å…±ç­†å€åŸŸ & éæœŸæé†’

## ğŸ“‹ éœ€æ±‚åˆ†æ

### 1ï¸âƒ£ **å…±ç­†å€åŸŸ (Collaborative Notes)**

**ä½¿ç”¨å ´æ™¯**:

- åŒäº‹ä¹‹é–“åˆ†äº«æ¡ˆä»¶ç¶“é©—
- è¨˜éŒ„æœ€ä½³å¯¦è¸
- çŸ¥è­˜åº«å»ºç«‹

**å»ºè­°æ–¹æ¡ˆ**: å»ºç«‹ã€Œåœ˜éšŠçŸ¥è­˜åº«ã€åŠŸèƒ½

---

### 2ï¸âƒ£ **éæœŸæé†’å•é¡Œ**

**ç›®å‰å•é¡Œ**:

- æ¡ˆä»¶è¡Œäº‹æ›†é¡¯ç¤ºæ‰€æœ‰æé†’,åŒ…æ‹¬å·²éæœŸçš„
- é€ æˆè¦–è¦ºå¹²æ“¾

**è§£æ±ºæ–¹æ¡ˆ**: æ·»åŠ éæ¿¾é¸é …

---

## ğŸš€ å¯¦ä½œæ–¹æ¡ˆ

### æ–¹æ¡ˆ A: å¿«é€Ÿä¿®å¾© - éæœŸæé†’éæ¿¾ (30åˆ†é˜)

#### ä¿®æ”¹ `CaseScheduleManager.tsx`

**ç›®æ¨™**: åªé¡¯ç¤ºæœªä¾†çš„æé†’ + æœ€è¿‘ 7 å¤©å…§çš„éæœŸæé†’

\`\`\`typescript
// åœ¨ fetchSchedule å‡½æ•¸ä¸­æ·»åŠ éæ¿¾é‚è¼¯
const fetchSchedule = async () => {
    setLoading(true);

    // è¨ˆç®— 7 å¤©å‰çš„æ—¥æœŸ
    const sevenDaysAgo = new Date();
    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
    
    const { data, error } = await supabase
        .from('todos')
        .select('*')
        .eq('case_id', caseId)
        .eq('is_deleted', false)
        .gte('due_date', sevenDaysAgo.toISOString()) // åªé¡¯ç¤º 7 å¤©å…§çš„
        .order('due_date', { ascending: true });

    if (data) {
        setScheduleItems(data as any[]);
    }
    setLoading(false);
};
\`\`\`

**å„ªé»**:

- âœ… å¿«é€Ÿå¯¦ä½œ
- âœ… ç«‹å³è¦‹æ•ˆ
- âœ… æ¸›å°‘è¦–è¦ºå¹²æ“¾

**ç¼ºé»**:

- âš ï¸ ç„¡æ³•æŸ¥çœ‹æ­·å²æé†’

---

### æ–¹æ¡ˆ B: é€²éšç‰ˆ - æ·»åŠ éæ¿¾é¸é … (1å°æ™‚)

**UI è¨­è¨ˆ**:

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… æ¡ˆä»¶è¡Œäº‹æ›†èˆ‡å‚™å¿˜                     â”‚
â”‚                                         â”‚
â”‚ é¡¯ç¤º: [å…¨éƒ¨] [æœªä¾†] [ä»Šå¤©] [å·²éæœŸ]    â”‚ â† æ–°å¢éæ¿¾æŒ‰éˆ•
â”‚                                         â”‚
â”‚ [æ–°å¢è¡Œç¨‹è¡¨å–®]                          â”‚
â”‚                                         â”‚
â”‚ âœ… 2026/01/20 - èˆ‡ä»£æ›¸ç¢ºèª              â”‚
â”‚ â° 2026/01/18 - å®¢æˆ¶ç°½ç´„                â”‚
â”‚ âš ï¸ 2026/01/15 - å·²éæœŸæé†’ (å·²éæœŸ)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

**å¯¦ä½œ**:

\`\`\`typescript
const [filter, setFilter] = useState<'all' | 'future' | 'today' | 'expired'>('future');

const filteredItems = scheduleItems.filter(item => {
    const dueDate = new Date(item.due_date);
    const now = new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

    switch (filter) {
        case 'future':
            return dueDate >= now;
        case 'today':
            const itemDate = new Date(dueDate.getFullYear(), dueDate.getMonth(), dueDate.getDate());
            return itemDate.getTime() === today.getTime();
        case 'expired':
            return dueDate < now && !item.is_completed;
        case 'all':
        default:
            return true;
    }
});
\`\`\`

---

### æ–¹æ¡ˆ C: å®Œæ•´æ–¹æ¡ˆ - åœ˜éšŠçŸ¥è­˜åº« (3-4å°æ™‚)

#### è³‡æ–™åº« Schema

\`\`\`sql
-- å»ºç«‹åœ˜éšŠç­†è¨˜è¡¨
CREATE TABLE team_notes (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    title TEXT NOT NULL,
    content TEXT,
    category TEXT, -- 'ç¶“é©—åˆ†äº«', 'æœ€ä½³å¯¦è¸', 'å¸¸è¦‹å•é¡Œ'
    tags TEXT[], -- ['ç¨…å‹™', 'è²¸æ¬¾', 'éæˆ¶']
    author_id UUID REFERENCES auth.users(id),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_pinned BOOLEAN DEFAULT FALSE,
    view_count INTEGER DEFAULT 0
);

-- å»ºç«‹è©•è«–è¡¨
CREATE TABLE note_comments (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    note_id UUID REFERENCES team_notes(id) ON DELETE CASCADE,
    user_id UUID REFERENCES auth.users(id),
    content TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLS æ”¿ç­–
ALTER TABLE team_notes ENABLE ROW LEVEL SECURITY;

CREATE POLICY "æ‰€æœ‰äººå¯è®€å–åœ˜éšŠç­†è¨˜"
ON team_notes FOR SELECT
USING (true);

CREATE POLICY "å·²ç™»å…¥ä½¿ç”¨è€…å¯æ–°å¢ç­†è¨˜"
ON team_notes FOR INSERT
WITH CHECK (auth.uid() = author_id);

CREATE POLICY "ä½œè€…å¯æ›´æ–°è‡ªå·±çš„ç­†è¨˜"
ON team_notes FOR UPDATE
USING (auth.uid() = author_id);
\`\`\`

#### UI è¨­è¨ˆ

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“š åœ˜éšŠçŸ¥è­˜åº«                                       â”‚
â”‚                                                     â”‚
â”‚ [æ–°å¢ç­†è¨˜]  [æˆ‘çš„ç­†è¨˜]  [ç†±é–€]  [æœ€æ–°]             â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“Œ [ç½®é ‚] å¦‚ä½•è™•ç†åœŸåœ°å¢å€¼ç¨…æ¸›å…ç”³è«‹         â”‚   â”‚
â”‚ â”‚ ä½œè€…: å¼µä¸‰ | 2026/01/15 | ğŸ‘ï¸ 128 | ğŸ’¬ 5    â”‚   â”‚
â”‚ â”‚ #ç¨…å‹™ #åœŸå¢ç¨… #æ¸›å…                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ’¡ éŠ€è¡Œè²¸æ¬¾å¯©æ ¸å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ            â”‚   â”‚
â”‚ â”‚ ä½œè€…: æå›› | 2026/01/14 | ğŸ‘ï¸ 95 | ğŸ’¬ 3     â”‚   â”‚
â”‚ â”‚ #è²¸æ¬¾ #éŠ€è¡Œ #å¯©æ ¸                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

#### åŠŸèƒ½ç‰¹è‰²

1. **åˆ†é¡ç®¡ç†**
   - ç¶“é©—åˆ†äº«
   - æœ€ä½³å¯¦è¸
   - å¸¸è¦‹å•é¡Œ
   - æ³•è¦æ›´æ–°

2. **æ¨™ç±¤ç³»çµ±**
   - è‡ªå‹•å»ºè­°æ¨™ç±¤
   - æ¨™ç±¤æœå°‹
   - ç†±é–€æ¨™ç±¤

3. **äº’å‹•åŠŸèƒ½**
   - è©•è«–è¨è«–
   - é»è®šæ”¶è—
   - åˆ†äº«é€£çµ

4. **æœå°‹åŠŸèƒ½**
   - å…¨æ–‡æœå°‹
   - æ¨™ç±¤éæ¿¾
   - ä½œè€…éæ¿¾

---

## ğŸ“Š æ–¹æ¡ˆæ¯”è¼ƒ

| æ–¹æ¡ˆ | æ™‚é–“æˆæœ¬ | ç«‹å³æ•ˆç›Š | é•·æœŸåƒ¹å€¼ | æ¨è–¦åº¦ |
|------|----------|----------|----------|--------|
| A. å¿«é€Ÿä¿®å¾© | 30åˆ†é˜ | â­â­â­â­â­ | â­â­ | ğŸŸ¢ ç«‹å³å¯¦ä½œ |
| B. éæ¿¾é¸é … | 1å°æ™‚ | â­â­â­â­ | â­â­â­ | ğŸŸ¡ å»ºè­°å¯¦ä½œ |
| C. çŸ¥è­˜åº« | 3-4å°æ™‚ | â­â­â­ | â­â­â­â­â­ | ğŸ”µ è¦åŠƒå¯¦ä½œ |

---

## ğŸ¯ å»ºè­°å¯¦æ–½é †åº

### Phase 1: ç«‹å³ä¿®å¾© (ä»Šå¤©)

1. **æ–¹æ¡ˆ A**: éæ¿¾éæœŸæé†’ (30åˆ†é˜)
   - åªé¡¯ç¤ºæœªä¾† + æœ€è¿‘ 7 å¤©çš„æé†’
   - ç«‹å³æ¸›å°‘è¦–è¦ºå¹²æ“¾

### Phase 2: åŠŸèƒ½å¢å¼· (æœ¬é€±)

2. **æ–¹æ¡ˆ B**: æ·»åŠ éæ¿¾é¸é … (1å°æ™‚)
   - å…¨éƒ¨/æœªä¾†/ä»Šå¤©/å·²éæœŸ
   - æä¾›æ›´éˆæ´»çš„æŸ¥çœ‹æ–¹å¼

### Phase 3: é•·æœŸè¦åŠƒ (ä¸‹é€±)

3. **æ–¹æ¡ˆ C**: åœ˜éšŠçŸ¥è­˜åº« (3-4å°æ™‚)
   - å»ºç«‹å…±ç­†ç³»çµ±
   - çŸ¥è­˜ç´¯ç©èˆ‡åˆ†äº«

---

## ğŸ’¡ é¡å¤–å»ºè­°

### è‡ªå‹•åŒ–æé†’æ¸…ç†

**ä½¿ç”¨ n8n è‡ªå‹•åŒ–**:

\`\`\`yaml
workflow: æ¸…ç†éæœŸæé†’
trigger: æ¯å¤©å‡Œæ™¨ 2:00
steps:

  1. æŸ¥è©¢ 30 å¤©å‰çš„å·²å®Œæˆæé†’
  2. è‡ªå‹•æ¨™è¨˜ç‚º is_deleted = true
  3. ç™¼é€æ¸…ç†å ±å‘Šåˆ° Slack
\`\`\`

### æ™ºèƒ½æé†’åˆ†é¡

**AI è‡ªå‹•åˆ†é¡**:

- ç·Šæ€¥æé†’ (ç´…è‰²)
- é‡è¦æé†’ (é»ƒè‰²)
- ä¸€èˆ¬æé†’ (è—è‰²)
- å·²éæœŸ (ç°è‰²)

---

## ğŸš€ ç«‹å³å¯åŸ·è¡Œ

### é¸é … 1: å¿«é€Ÿä¿®å¾© (æ¨è–¦)

æˆ‘å¯ä»¥ç«‹å³å¹«æ‚¨ä¿®æ”¹ `CaseScheduleManager.tsx`,æ·»åŠ éæœŸæé†’éæ¿¾ã€‚

**é æœŸæ•ˆæœ**:

- âœ… åªé¡¯ç¤ºæœªä¾†çš„æé†’
- âœ… ä¿ç•™æœ€è¿‘ 7 å¤©çš„éæœŸæé†’ (é¿å…éºæ¼)
- âœ… æ¸›å°‘ 90% çš„è¦–è¦ºå¹²æ“¾

### é¸é … 2: å®Œæ•´æ–¹æ¡ˆ

æˆ‘å¯ä»¥å¹«æ‚¨å»ºç«‹å®Œæ•´çš„åœ˜éšŠçŸ¥è­˜åº«ç³»çµ±ã€‚

**åŒ…å«**:

- è³‡æ–™åº« Schema
- å‰ç«¯ UI çµ„ä»¶
- æœå°‹èˆ‡éæ¿¾åŠŸèƒ½
- è©•è«–ç³»çµ±

---

## â“ æ‚¨çš„é¸æ“‡

è«‹å‘Šè¨´æˆ‘æ‚¨æƒ³è¦:

1. **ç«‹å³ä¿®å¾©** - éæ¿¾éæœŸæé†’ (30åˆ†é˜)
2. **é€²éšç‰ˆ** - æ·»åŠ éæ¿¾é¸é … (1å°æ™‚)
3. **å®Œæ•´æ–¹æ¡ˆ** - åœ˜éšŠçŸ¥è­˜åº« (3-4å°æ™‚)
4. **å…¨éƒ¨éƒ½è¦** - åˆ†éšæ®µå¯¦ä½œ

æˆ‘æœƒæ ¹æ“šæ‚¨çš„é¸æ“‡æä¾›è©³ç´°çš„å¯¦ä½œæ­¥é©Ÿ! ğŸ¯
